#-*-Makefile-*- vim:syntax=make
define CC2538EM_HELP

CC2538EM extras:
  None available at the moment.

endef

HELP += $(CC2538EM_HELP)

GCC = arm-none-eabi-gcc
OBJCOPY = arm-none-eabi-objcopy
OBJDUMP = arm-none-eabi-objdump
SET_ID = tos-set-symbols
SIZE = arm-linux-gnueabi-size
LIBS = -lm

INSTALL_ELF = $(MAIN_ELF).out$(if $(NODEID),-$(NODEID),)
TOSMAKE_ADDITIONAL_INPUTS += $(TINYOS_OS_DIR)/platforms/cc2538em/startup_gcc.c

TOSMAKE_BINARY_FORMAT = exe
TOSMAKE_BINARY_IN = $(MAIN_EXE)
TOSMAKE_BINARY_OUT = $(INSTALL_EXE)

CFLAGS += -mcpu=cortex-m3 -mthumb -fno-strict-aliasing
PFLAGS += -Wall -Wshadow
PFLAGS += -finline-limit=100000

# can be overridden by MP-enabled linker file (see mpu.extra)
LINKERFILE ?= cc2538.ld
LDFLAGS += -L$(TINYOS_OS_DIR)/platforms/cc2538em -T $(LINKERFILE)
